@echo off
echo ====================================================
echo      –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø –°–ï–†–í–ï–†–û–í 5001 -> 5000 (DOCKER)
echo ====================================================
echo.

cd /d "%~dp0"

echo üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –æ–±–æ–∏–º–∏ —Å–µ—Ä–≤–µ—Ä–∞–º–∏...
python sync_servers.py --test-only
if errorlevel 1 (
    echo.
    echo ‚ùå –û–¥–∏–Ω –∏–ª–∏ –æ–±–∞ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã!
    echo.
    echo üîß –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
    echo    - –°–µ—Ä–≤–µ—Ä 5001 –∑–∞–ø—É—â–µ–Ω: run.py –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –ø–æ—Ä—Ç—É 5001
    echo    - Docker —Å–µ—Ä–≤–µ—Ä 5000: docker-compose up -d
    echo.
    pause
    exit /b 1
)

echo.
echo ‚úÖ –û–±–∞ —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω—ã!
echo.

echo üìä –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–µ—Ä–≤–µ—Ä–µ 5001...
python sync_servers.py --info
echo.

echo üîÑ –ù–∞—á–∏–Ω–∞–µ–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö...
echo    –ò–ó: 127.0.0.1:5001 (–∏—Å—Ö–æ–¥–Ω—ã–π —Å–µ—Ä–≤–µ—Ä)
echo    –í:  127.0.0.1:5000 (Docker —Å–µ—Ä–≤–µ—Ä)
echo ====================================================

python sync_servers.py --sync

if errorlevel 1 (
    echo.
    echo ‚ùå –û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏!
    pause
    exit /b 1
)

echo.
echo ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!
echo.

echo üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ Docker —Å–µ—Ä–≤–µ—Ä–µ...
python check_server_data.py

echo.
echo üéâ –ì–æ—Ç–æ–≤–æ! –î–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã —Å 5001 –Ω–∞ 5000
pause 